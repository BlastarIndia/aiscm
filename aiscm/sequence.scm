(define-module (aiscm sequence)
  #:use-module (aiscm element)
  #:use-module (aiscm malloc)
  #:use-module (aiscm pointer)
  #:use-module (aiscm lookup)
  #:use-module (aiscm lambda)
  #:use-module (aiscm var)
  #:use-module (oop goops)
  #:export (make-sequence))
(define (make-sequence type size)
  (let* ((mem (make-malloc (* (storage-size type) size)))
         (ptr (make-pointer type mem))
         (var (make-var))
         (lookup (make-lookup ptr var 1 size)))
    (make-lambda var lookup)))
